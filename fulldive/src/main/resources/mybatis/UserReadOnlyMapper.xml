<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="UserReadOnlyMapper">
		
	<resultMap type="com.fulldive.back.entity.UserEntity" id="userSelectRM">
		<result property="userId" column="USER_ID"/>
		<result property="userEmail" column="USER_EMAIL"/>
		<result property="userPassword" column="USER_PASSWORD"/>
		<result property="userChkEmail" column="USER_CHK_EMAIL"/>
		<result property="userAccess" column="USER_ACCESS"/>
		<result property="userNickname" column="USER_NICKNAME"/>
		<result property="userAge" column="USER_AGE"/>
		<result property="userName" column="USER_NAME"/>
		<result property="userPhone" column="USER_PHONE"/>
		<result property="userProfileImage" column="USER_PROFILE_IMAGE"/>
		<result property="userGender" column="USER_GENDER"/>
		<result property="userNation" column="USER_NATION"/>
		<result property="userAddress" column="USER_ADDRESS"/>
		<result property="createTimestamp" column="CREATE_TIMESTAMP"/>
	</resultMap>
	
 
    <select id="userlogin" parameterType="java.util.HashMap" resultType="com.fulldive.back.entity.UserEntity" resultMap="userSelectRM">
        SELECT
        	USER_ID,
			USER_EMAIL,
			USER_PASSWORD,
			USER_CHK_EMAIL,
			USER_ACCESS,
			USER_NICKNAME,
			USER_AGE,
			USER_NAME,
			USER_PHONE,
			USER_PROFILE_IMAGE,
			USER_GENDER,
			USER_NATION,
			USER_ADDRESS,
			convert(varchar(19), CREATE_TIMESTAMP , 120) "CREATE_TIMESTAMP"
		FROM
			TB_MILKOMEDA_USER
		WHERE 1=1
		<![CDATA[
			AND USER_EMAIL = #{userEmail, jdbcType=NVARCHAR}
		]]>
    </select>
    
    
    <select id="userJoinIdChk" parameterType="java.util.HashMap" resultType="com.fulldive.back.entity.UserEntity" resultMap="userSelectRM">
        SELECT
			USER_EMAIL
		FROM
			TB_MILKOMEDA_USER
		WHERE 1=1
		<![CDATA[
			AND USER_EMAIL = #{userEmail, jdbcType=NVARCHAR}
		]]>
    </select>
</mapper>